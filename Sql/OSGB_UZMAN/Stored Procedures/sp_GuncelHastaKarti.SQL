BEGIN TRAN
GO
ALTER PROCEDURE [dbo].[sp_GuncelHastaKarti]
@dosyaNo varchar(6),
@KURUM varchar(10),
@SIGORTANO varchar(20),
@CINSIYETI varchar(1),
@MEDENI varchar(1),
@HASTAADI varchar(50),
@HASTASOYADI varchar(50),
@BABAADI varchar(50),
@ANAADI varchar(50),
@EV_ADRES varchar(60),
@EV_PK varchar(8),
@EV_SEHIR varchar(20),
@EV_TEL1 varchar(15),
@EV_TEL2 varchar(15),
@EMAIL varchar(60),
@DOGUMYERI varchar(20),
@DOGUMTARIHI varchar(10),
@UYRUGU varchar(6),
@TCKIMLIKNO varchar(15),
@HUVIYETTIPI varchar(10),
@HUVIYETNO varchar(10),
@KURUMTIPI varchar(2),
@SICILNO varchar(20),
@KARNENO varchar(20),
@seans varchar(7),
@seansSaat int,
@SigortaliTur varchar(1),
@seansTip varchar(1) = '1',
@IS_TEL varchar(15),
@IS_TEL1 varchar(15),
@YAKINLIK varchar(4),
@RaporTarih varchar(10)='',
@GecerlikTarihi varchar(10)='',
@sevkEdenTesis varchar(10)='',
@sevkEdilenBrans varchar(10)='',
@sevkEdenDoktor varchar(10)='',
@muayenAcilis varchar(10)='',
@PBH varchar(50),
@KH varchar(150),
@TS varchar(50),
@DS varchar(50),
@DC varchar(50),
@YA varchar(50),
@SD varchar(50),
@D varchar(50),
@DG varchar(50),
@H varchar(50),
@Baslangic varchar(10),
@hastaNot text,
@merkezdeBaslangic varchar(10),
@vyer varchar(20),
@huviyetTarih varchar(10),
@kanGrubu varchar(1),
@raporNo varchar(20)='',
@hastaTip varchar(1),
@makinaNo varchar(3),
@idealkilo float,
@Hepatit varchar(1),
@HIV varchar(1),
@Aday varchar(1),
@Sandalye bit = 0,
@APH varchar(10) = '',
@Na varchar(10) = '',
@SoyGecmis varchar(500),
@Boy int,
@GelHast varchar(30) = '',
@diger varchar(250) = '',
@alerji varchar(100) = '',
@Tip varchar(1) = 'H',
@vatandasTip VARCHAR(1) = '0',
@ilkTaniTarihi varchar(10)='',
@DegisimiYapan varchar(50),
@TunelYonu varchar(50),
@KYY varchar(50),
@gelisSIK varchar(50),
@KataterTip varchar(50),
@DegisimSayi int,
@KacinciKatater int,
@HbsAg varchar(1) = '',
@AntiHbs varchar(1) = '',
@AntiHcv varchar(1) = '',
@AntiHiv varchar(1) = '',
@GEC varchar(50) = '',
@KataterTakTarihi varchar(10) = '',
@PDbaslamaTarihi varchar(10) = '',
@HCOOO VARCHAR(5),
@DIS VARCHAR(10) = '',
@HEPARINUYG VARCHAR(50)='',
@HEPARINTIP VARCHAR(50) = ''

AS


UPDATE  [HASTAKART]
  set
  KURUM = @KURUM,
  SIGORTANO = @SIGORTANO,
  CINSIYETI = @CINSIYETI,
  MEDENI = @MEDENI,
  HASTAADI = @HASTAADI,
  HASTASOYADI = @HASTASOYADI,
  BABAADI = @BABAADI,
  ANAADI = @ANAADI,
  EV_ADRES = @EV_ADRES,
  EV_PK = @EV_PK,
  EV_SEHIR = @EV_SEHIR,
  EV_TEL1 = @EV_TEL1,
  EV_TEL2 = @EV_TEL2,
  EMAIL = @EMAIL,
  DOGUMYERI = @DOGUMYERI,
  DOGUMTARIHI = @DOGUMTARIHI,
  UYRUGU = @UYRUGU,
  TCKIMLIKNO = @TCKIMLIKNO,
  HUVIYETTIPI = @HUVIYETTIPI,
  HUVIYETNO = @HUVIYETNO,
  KurumTip = @KURUMTIPI,
  SicilNo = @SICILNO,
  KarneNo = @KARNENO,
  seansGunleri = @seans,
  seansSuresi = @seansSaat,
  Durum = @SigortaliTur,
  Seans = @seansTip,
  IS_TEL1 = @IS_TEL,
  IS_TEL2 = @IS_TEL1,
  YAKINLIK = @YAKINLIK,
  RaporTarihi = @raporTarih,
  RaporGecerlik = @gecerlikTarihi,
  sevkEdenTesis = @sevkEdenTesis,
  sevkEdilenBrans = @sevkEdilenBrans,
  sevkEdenDoktor = @sevkEdenDoktor,
  muayeneAcilisTarihi = @muayenAcilis,
  PBH = @PBH,
  KH = @KH,
  TS = @TS,
  DS = @DS,
  DC = @DC,
  YA = @YA,
  SD = @SD,
  D = @D,
  DG = @DG,
  H = @H,
  BASLANGIC = @Baslangic,
  hastaNot = @hastaNot,
  merkezdeBaslangic = @merkezdeBaslangic,
  HUVIYETVYER =  @vyer,
  HUVIYETTARIHI =  @huviyetTarih,
  KANGRUBU = @KanGrubu,
  raporNo = @raporNo,
  hastatip = @hastaTip,
  makinaNo = @makinaNo,
  IdealKilo = @idealkilo,
  Hepatit = @Hepatit,
  HiV = @HIV,
  Aday = @Aday,
  TekSandalye = @Sandalye,
  APH = @APH,
  Na = @Na,
  soygecmis = @SoyGecmis,
  Boy = @Boy,
  GELHAST = @GelHast,
  Diger = @diger,
  Alerji = @alerji,
  Tip = @Tip,
  vatandasTip = @vatandasTip,
  DegisimiYapan = @DegisimiYapan,
  TunelYonu = @TunelYonu,
  KYY = @KYY,
  gelisSIK = @gelisSIK,
  KataterTip = @KataterTip,
  DegisimSayi = @DegisimSayi,
  KacinciKatater = @KacinciKatater,
  HbsAg = @HbsAg ,
  AntiHbs = @AntiHbs ,
  AntiHCV = @AntiHCV,
  Gecirgenlik = @GEC,
  ilktaniTarihi = @ilkTaniTarihi,
  PDbaslamaTarihi = @PDbaslamaTarihi, 
  KataterTakTarihi = @KataterTakTarihi,
  HCOOO = @HCOOO,
  YKARTNO = @DIS,
  HEPARINUYG = @HEPARINUYG,
  HEPARINTIP = @HEPARINTIP


 WHERE DOSYANO = @dosyano

select @@rowcount  as sonuc
GO
exec sp_vw_sys_upd 'P ', 'dbo', 'sp_GuncelHastaKarti'
GO
COMMIT
GO
